{% extends "base.html" %}

{% block title %}Find Doctors - Care_4_U Hospitals{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="page-hero">
    <div class="container">
        <h1>Find Your Specialist</h1>
        <p>Book appointments with certified medical professionals</p>
    </div>
</section>

<!-- Search & Filter -->
<section class="filter-section">
    <div class="container">
        <div class="search-box">
            <form method="GET" action="{{ url_for('doctors') }}">
                <div class="search-group">
                    <input type="text" name="search" placeholder="Search by doctor name..." 
                           value="{{ request.args.get('search', '') }}">
                    <select name="specialization">
                        <option value="all">All Specializations</option>
                        {% for spec in specializations %}
                            <option value="{{ spec }}" 
                                    {% if request.args.get('specialization') == spec %}selected{% endif %}>
                                {{ spec }}
                            </option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </form>
        </div>
        
        <div class="specialization-tags">
            <a href="{{ url_for('doctors') }}" 
               class="tag {% if not request.args.get('specialization') %}active{% endif %}">All</a>
            {% for spec in specializations[:8] %}
                <a href="{{ url_for('doctors', specialization=spec) }}" 
                   class="tag {% if request.args.get('specialization') == spec %}active{% endif %}">
                    {{ spec }}
                </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Doctors List -->
<section class="doctors-section">
    <div class="container">
        {% if doctors %}
            <div class="doctors-grid">
                {% for doctor in doctors %}
                    <div class="doctor-card">
                        <div class="doctor-image">
                            {% if doctor.profile_image %}
                                <img src="{{ doctor.profile_image }}" alt="{{ doctor.name }}">
                            {% else %}
                                <div class="doctor-avatar">
                                    <i class="fas fa-user-md"></i>
                                </div>
                            {% endif %}
                            {% if doctor.is_available %}
                                <span class="availability available">Available</span>
                            {% else %}
                                <span class="availability unavailable">Unavailable</span>
                            {% endif %}
                        </div>
                        
                        <div class="doctor-info">
                            <h3>{{ doctor.name }}</h3>
                            <p class="specialization">{{ doctor.specialization }}</p>
                            <p class="qualifications">{{ doctor.qualifications }}</p>
                            
                            <div class="doctor-details">
                                <div class="detail-item">
                                    <i class="fas fa-briefcase"></i>
                                    <span>{{ doctor.experience }} years experience</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-calendar"></i>
                                    <span>{{ doctor.available_days }}</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ doctor.available_time }}</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-phone"></i>
                                    <span>{{ doctor.phone }}</span>
                                </div>
                            </div>
                            
                            <div class="doctor-footer">
                                <div class="fee">
                                    <strong>Fee: ${{ doctor.consultation_fee }}</strong>
                                </div>
                                {% if current_user.is_authenticated and current_user.user_type == 'patient' %}
                                    <a href="{{ url_for('book_appointment', doctor_id=doctor.id) }}" 
                                       class="btn btn-primary">
                                        Book Appointment
                                    </a>
                                {% elif not current_user.is_authenticated %}
                                    <a href="{{ url_for('login') }}" class="btn btn-primary">
                                        Login to Book
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="doctors-grid">
                {% set sample_doctors = [
                    {
                        'name': 'Dr. Aisha Khan', 'spec': 'Dermatology', 'qual': 'MD, FAAD', 'exp': '10 years',
                        'days': 'Mon, Wed, Fri', 'time': '10:00 AM - 5:00 PM', 'phone': '+1-555-1001', 'fee': '140'
                    },
                    {
                        'name': 'Dr. Luis Martinez', 'spec': 'Orthopedics', 'qual': 'MD, FAAOS', 'exp': '13 years',
                        'days': 'Tue, Thu, Sat', 'time': '9:00 AM - 2:00 PM', 'phone': '+1-555-1002', 'fee': '165'
                    },
                    {
                        'name': 'Dr. Priya Patel', 'spec': 'Endocrinology', 'qual': 'MD, FACE', 'exp': '11 years',
                        'days': 'Mon, Tue, Thu, Fri', 'time': '11:00 AM - 6:00 PM', 'phone': '+1-555-1003', 'fee': '155'
                    },
                    {
                        'name': 'Dr. Chen Wei', 'spec': 'Gastroenterology', 'qual': 'MD, AGAF', 'exp': '14 years',
                        'days': 'Mon, Wed, Thu', 'time': '8:30 AM - 3:30 PM', 'phone': '+1-555-1004', 'fee': '175'
                    },
                    {
                        'name': 'Dr. Olivia Brown', 'spec': 'Gynecology', 'qual': 'MD, FACOG', 'exp': '9 years',
                        'days': 'Tue, Thu, Sat', 'time': '10:00 AM - 4:00 PM', 'phone': '+1-555-1005', 'fee': '150'
                    },
                    {
                        'name': 'Dr. Daniel Smith', 'spec': 'Oncology', 'qual': 'MD', 'exp': '16 years',
                        'days': 'Mon, Wed, Fri', 'time': '9:00 AM - 1:00 PM', 'phone': '+1-555-1006', 'fee': '200'
                    },
                    {
                        'name': 'Dr. Sophia Rossi', 'spec': 'Ophthalmology', 'qual': 'MD, FAAO', 'exp': '12 years',
                        'days': 'Mon, Tue, Fri', 'time': '10:00 AM - 5:00 PM', 'phone': '+1-555-1007', 'fee': '130'
                    },
                    {
                        'name': 'Dr. James Wilson', 'spec': 'ENT', 'qual': 'MD, FACS', 'exp': '10 years',
                        'days': 'Tue, Wed, Thu', 'time': '9:00 AM - 4:00 PM', 'phone': '+1-555-1008', 'fee': '145'
                    },
                    {
                        'name': 'Dr. Hannah Lee', 'spec': 'Rheumatology', 'qual': 'MD, FACR', 'exp': '9 years',
                        'days': 'Mon, Wed, Fri', 'time': '11:00 AM - 6:00 PM', 'phone': '+1-555-1009', 'fee': '160'
                    },
                    {
                        'name': 'Dr. Victor Hugo', 'spec': 'Psychiatry', 'qual': 'MD', 'exp': '15 years',
                        'days': 'Tue, Thu, Fri', 'time': '12:00 PM - 7:00 PM', 'phone': '+1-555-1010', 'fee': '140'
                    },
                    {
                        'name': 'Dr. Laura Kim', 'spec': 'Pulmonology', 'qual': 'MD, FCCP', 'exp': '10 years',
                        'days': 'Mon, Tue, Thu', 'time': '9:30 AM - 4:30 PM', 'phone': '+1-555-1011', 'fee': '150'
                    },
                    {
                        'name': 'Dr. Robert King', 'spec': 'Urology', 'qual': 'MD, FACS', 'exp': '13 years',
                        'days': 'Wed, Thu, Fri', 'time': '8:00 AM - 2:00 PM', 'phone': '+1-555-1012', 'fee': '170'
                    },
                    {
                        'name': 'Dr. Grace Turner', 'spec': 'Nephrology', 'qual': 'MD, FASN', 'exp': '11 years',
                        'days': 'Mon, Wed, Thu', 'time': '10:00 AM - 5:00 PM', 'phone': '+1-555-1013', 'fee': '165'
                    },
                    {
                        'name': 'Dr. David Green', 'spec': 'General Surgery', 'qual': 'MD, FACS', 'exp': '14 years',
                        'days': 'Tue, Thu, Sat', 'time': '7:30 AM - 1:30 PM', 'phone': '+1-555-1014', 'fee': '190'
                    },
                    {
                        'name': 'Dr. Emma Clark', 'spec': 'Family Medicine', 'qual': 'MD', 'exp': '7 years',
                        'days': 'Mon, Tue, Fri, Sat', 'time': '9:00 AM - 6:00 PM', 'phone': '+1-555-1015', 'fee': '110'
                    }
                ] %}

                {% for doc in sample_doctors %}
                    <div class="doctor-card">
                        <div class="doctor-image">
                            <div class="doctor-avatar">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <span class="availability available">Available</span>
                        </div>
                        <div class="doctor-info">
                            <h3>{{ doc.name }}</h3>
                            <p class="specialization">{{ doc.spec }}</p>
                            <p class="qualifications">{{ doc.qual }}</p>
                            <div class="doctor-details">
                                <div class="detail-item">
                                    <i class="fas fa-briefcase"></i>
                                    <span>{{ doc.exp }} experience</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-calendar"></i>
                                    <span>{{ doc.days }}</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ doc.time }}</span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-phone"></i>
                                    <span>{{ doc.phone }}</span>
                                </div>
                            </div>
                            <div class="doctor-footer">
                                <div class="fee">
                                    <strong>Fee: ${{ doc.fee }}</strong>
                                </div>
                                <a class="btn btn-primary disabled" aria-disabled="true">
                                    Book Appointment
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</section>

<!-- How It Works -->
<section class="how-it-works">
    <div class="container">
        <h2 class="section-title">How to Book an Appointment</h2>
        <div class="steps-grid">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Find a Doctor</h3>
                <p>Browse specialists by name, specialization, or availability</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Choose Time</h3>
                <p>Select your preferred date and time slot</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Book Appointment</h3>
                <p>Confirm your appointment details</p>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <h3>Get Confirmation</h3>
                <p>Receive appointment confirmation via email/SMS</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}